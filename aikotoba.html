<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åˆè¨€è‘‰ã‚’é›†ã‚ã‚ˆã†</title>

<style>
  body {
    font-family: "Segoe UI", sans-serif;
    text-align: center;
    background: #f4f4f4;
    padding: 40px;
  }
  .card {
    background: white;
    border-radius: 16px;
    padding: 30px;
    max-width: 400px;
    margin: 0 auto;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }
  h1 { color: #333; }
  .found { color: green; font-weight: bold; }
  .not-found { color: gray; }
  .aikotoba {
    font-size: 1.5em;
    color: #e91e63;
    margin-top: 20px;
  }
  button {
    margin-top: 20px;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: #2196f3;
    color: white;
    font-size: 1em;
  }
</style>
</head>
<body>
  <div class="card">
    <h1>åˆè¨€è‘‰ã‚’é›†ã‚ã‚ˆã†ï¼</h1>
    <p>QRã‚’èª­ã¿å–ã£ã¦3ã¤ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’é›†ã‚ã‚ˆã†ã€‚</p>

    <div id="status"></div>
    <div class="aikotoba" id="result"></div>

    <button onclick="resetProgress()">ãƒªã‚»ãƒƒãƒˆ</button>
  </div>

<script>
(function() {
  // åˆè¨€è‘‰ã®è¨­å®šï¼ˆã“ã“ã‚’è‡ªç”±ã«å¤‰æ›´OKï¼‰
  const FINAL_KEYWORD = "ğŸŒ¸ã‚µã‚¯ãƒ©ãƒ’ãƒ¡ğŸŒ¸";

  // URLã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ key ã‚’å–å¾—
  const params = new URLSearchParams(window.location.search);
  const key = params.get("key");

  // é€²æ—ãƒ‡ãƒ¼ã‚¿ã‚’ localStorage ã«ä¿å­˜
  const progress = JSON.parse(localStorage.getItem("foundKeys") || "[]");

  // æ–°ã—ã„ã‚­ãƒ¼ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã®å‡¦ç†

  progress.push(key);
  localStorage.setItem("foundKeys", JSON.stringify(progress));
    
    // â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…
    // ã“ã“ã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å‡¦ç†ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼
  alert(key + "ç•ªç›®ã®QRã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¦‹ï¼ğŸ‰");
    // â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…
  }

  // 3ã¤ã®ã‚­ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯
  const totalKeys = 3;
  const foundCount = progress.length;

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¡¨ç¤º
  const statusDiv = document.getElementById("status");
  let html = "";
  for (let i = 1; i <= totalKeys; i++) {
    html += `<p>${i}ç•ªç›®ã®QRï¼š<span class="${
      progress.includes(String(i)) ? "found" : "not-found"
    }">${progress.includes(String(i)) ? "ç™ºè¦‹æ¸ˆã¿" : "æœªç™ºè¦‹"}</span></p>`;
  }
  statusDiv.innerHTML = html;

  // ã™ã¹ã¦æƒã£ãŸã‚‰åˆè¨€è‘‰è¡¨ç¤º
  if (foundCount === totalKeys) {
    document.getElementById("result").textContent = "åˆè¨€è‘‰ã¯ã€Œ" + FINAL_KEYWORD + "ã€ï¼";
  }

  // ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½
  window.resetProgress = function() {
    localStorage.removeItem("foundKeys");
    location.reload();
  };
})();
</script>
</body>
</html>
